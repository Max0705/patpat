<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html>

	<head>
		<title>PatPat | 猜你喜欢</title>
		<!-- Meta-tags -->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Grounding Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
		<script type="application/x-javascript">
			addEventListener("load", function() {
				setTimeout(hideURLbar, 0);
			}, false);

			function hideURLbar() {
				window.scrollTo(0, 1);
			}
		</script>
		<script type="text/javascript" th:src="@{/js/loader.js}"></script>
		<!--// Metga-tags -->

		<!-- Styleshets -->
		<link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
		<!--// Bootstrap-css -->
		<link href="css/popuo-box.css" rel="stylesheet" type="text/css" media="all" />
		<!--// Pop-up -->
		<link href="css/banner.css" rel="stylesheet" type="text/css" media="all" />
		<!--// banner-css -->
		<link rel="stylesheet" href="css/shop.css" type="text/css" media="screen" property="" />
		<!--// shop-css -->
		<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
		<!-- common-css -->
		<link rel="stylesheet" href="css/flexslider.css" type="text/css" media="screen" />
		<!-- flexslider-css -->
		<link rel="stylesheet" type="text/css" href="css/jquery-ui1.css">
		<!-- Range-slider-css -->
		<link href="css/font-awesome.css" rel="stylesheet">
		<!-- // Font-awesome-css -->
		<!--// Styleshets -->

		<!-- Online-fonts -->
		<link href="//fonts.googleapis.com/css?family=Montserrat:300,500,600,700,800" rel="stylesheet">
		<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
		<!--// Online-fonts -->

	</head>

	<body>
		<!-- header -->
		<div class="header-w3layouts" id="home">
			<!-- header-top -->
			<div class="header_topw3layouts_bar">
				<div class="container">
					<div class="header_agileits_left">
						<ul>
							<li><i class="fa fa-phone" aria-hidden="true"></i> +(010) 221 918 811</li>
							<li><i class="fa fa-envelope-o" aria-hidden="true"></i>
								<a href="mailto:info@example.com">info@example.com</a>
							</li>
						</ul>
					</div>
					<div class="header_right">
						<a href="#" class="log" data-toggle="modal" data-target="#myModal">Login</a>
					</div>
					<div class="clearfix"> </div>
				</div>
			</div>
			<!--// header-top -->
			<!-- header-middle -->
			<div class="header-middle">
				<div class="container">
					<div class="logof-w3-agile">
						<h1><a href="index.html">PatPat</a></h1>
					</div>
					<div class="searchf-w3-agileits-headr">
						<form action="#" method="post">
							<input type="search" name="Search" placeholder="搜索..." required="">
							<button type="submit" class="btn btn-default search" aria-label="Left Align">
                            <i class="fa fa-search" aria-hidden="true"> </i>
                        </button>
						</form>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
			<!--// header-middle -->
			<nav class="navbar navbar-inverse">
				<div class="navbar-header">
					<button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".js-navbar-collapse">
			<span class="sr-only">Toggle navigation</span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		</button>
				</div>

				<div class="collapse navbar-collapse js-navbar-collapse">
					<ul class="nav navbar-nav">
						<li class="active">
							<a href="index.html">PatPat</a>
						</li>
						<li class="active">
							<a href="index.html">首页</a>
						</li>
						<li class="active">
							<a href="admin_app.html">app管理</a>
						</li>
						<li class="active">
							<a href="admin_comment.html">评论管理</a>
						</li>
						<li class="active">
							<a href="admin_user.html">用户管理</a>
						</li>
					</ul>
				</div>
				<!-- /.nav-collapse -->
			</nav>

		</div>
		<!-- banner -->
		<div class="innerf-banner">
		</div>
		<!--//banner -->
		<!-- Page details -->
		<div class="services-agile-breadcrumb">
			<div class="inner_breadcrumb">
				<ul class="short_ls">
					<li>
						<a href="index.html">首页</a>
						<span>| |</span>
					</li>
					<li>app管理</li>
				</ul>
			</div>
		</div>
		<!-- //Page details -->
		<!-- Single -->
		<div class="innerf-pages">
			<div class="container">

				<div class="clearfix"> </div>

				<!-- /new_arrivals -->
				<div class="new_arrivals">
					<h3>app管理</h3>
					<div class="panel-body">
						<form id="formSearch" class="form-horizontal">
							<div class="form-group" style="margin:15px">
								<label class="control-label col-sm-1" for="cuscname">app名:</label>
								<div class="col-sm-2">
									<input type="text" class="form-control" id="cuscname" />
								</div>
								<div class="col-sm-3" style="text-align:center;">
									<button type="button" id="btn_query" class="btn btn-primary">
													<span class="glyphicon glyphicon-search" aria-hidden="true"></span> 查 询
												</button>
								</div>
							</div>
						</form>
						<div id="toolbar" class="btn-group">
							<button id="btn_add" type="button" class="btn btn-default">
											<span class="glyphicon glyphicon-plus" aria-hidden="true"></span> 新 增
										</button>
							<button id="btn_edit" type="button" class="btn btn-default">
											<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> 修 改
										</button>
							<button id="btn_delete" type="button" class="btn btn-default">
											<span class="glyphicon glyphicon-remove" aria-hidden="true"></span> 删 除
										</button>
						</div>
						<!-- @@@@@@@@@@@@     表格数据     @@@@@@@@@@@@@ -->
						<table id="tb_cus" class="table table-striped table-bordered table-hover"></table>
						<!-- @@@@@@@@@@@@     表格数据     @@@@@@@@@@@@@ -->
					</div>
				</div>
				<!-- 模态框（Modal） myModal-->
				<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
								<form id="editForm">
									<table class="table" style="font: '黑体';">
										<thead>
											<tr>
												<th>app信息：<input type="hidden" id="cid" name="cid" class="form-control"></th>
												<th></th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td><b>名称:</b></td>
												<td><input type="text" id="cname" name="cname" class="form-control" /></td>
											</tr>
											<tr>
												<td><b>下载量：</b></td>
												<td><input type="text" id="mobile" name="mobile" class="form-control" /></td>
											</tr>
											<tr>
												<td><b>类型：</b></td>
												<td><input type="text" id="mobile" name="mobile" class="form-control" /></td>
											</tr>
											<tr>
												<td><b>详细信息：</b></td>
												<td><input type="text" id="mobile" name="mobile" class="form-control" /></td>
											</tr>
									
										</tbody>
									</table>
									<div class="modal-footer">
										<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
										<button type="button" id="btn_submit" class="btn btn-primary">提交</button>
									</div>
								</form>
							</div>
						</div>
					</div>
					<!-- /.modal-dialog -->
				</div>

				<!-- //womens -->
				<div class="clearfix"></div>
			</div>
			<!--//new_arrivals-->

			<div class="clearfix"></div>

		</div>
		</div>
		<!--// Single -->

		<!-- Subscribe -->
		<!--// Subscribe -->
		<!-- footer -->
		<div class="footer-wthree-copyf">
			<div class="container">
				<p>© 2018 ＰａｔＰａｔ. All rights reserved | Design by
					<a href="http://w3layouts.com">W3layouts</a>
				</p>
				<div class="clearfix"> </div>
			</div>
		</div>
		<!-- //footer -->

		<!-- js -->

		<!-- Common js -->
		<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
		<!--// Common js -->
		<!-- cart-js -->
		<script src="js/minicart.js"></script>
		<script>
			edu.render();

			edu.cart.on('edu_checkout', function(evt) {
				var items, len, i;

				if(this.subtotal() > 0) {
					items = this.items();

					for(i = 0, len = items.length; i < len; i++) {}
				}
			});
		</script>
		<!-- //cart-js -->
		<!-- single -->
		<script src="js/imagezoom.js"></script>
		<!-- single -->
		<!-- FlexSlider -->
		<script src="js/jquery.flexslider.js"></script>
		<script>
			// Can also be used with $(document).ready()
			$(window).load(function() {
				$('.flexslider1').flexslider({
					animation: "slide",
					controlNav: "thumbnails"
				});
			});
		</script>
		<!-- //FlexSlider-->

		<!-- Nav Js -->
		<script type="text/javascript" src="js/bootstrap.js"></script>
		<script>
			$(document).ready(function() {
				$(".dropdown").hover(
					function() {
						$('.dropdown-menu', this).not('.in .dropdown-menu').stop(true, true).slideDown("400");
						$(this).toggleClass('open');
					},
					function() {
						$('.dropdown-menu', this).not('.in .dropdown-menu').stop(true, true).slideUp("400");
						$(this).toggleClass('open');
					}
				);
			});
		</script>
		<!--// Nav Js -->
		<!-- bootstrap-pop-up -->
		<div class="modal video-modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModal">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						Sign In & Sign Up
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					</div>
					<section>
						<div class="modal-body">
							<div class="loginf_module">
								<div class="module form-module">
									<div class="toggle"><i class="fa fa-times fa-pencil"></i>
										<div class="tooltip">Click Me</div>
									</div>
									<div class="form">
										<h3>Login to your account</h3>
										<form action="#" method="post">
											<input type="text" name="Username" placeholder="Username" required="">
											<input type="password" name="Password" placeholder="Password" required="">
											<input type="submit" value="Login">
										</form>
										<div class="cta">
											<a href="#">Forgot your password?</a>
										</div>
									</div>
									<div class="form">
										<h3>Create an account</h3>
										<form action="#" method="post">
											<input type="text" name="Username" placeholder="Username" required="">
											<input type="password" name="Password" placeholder="Password" required="">
											<input type="email" name="Email" placeholder="Email address" required="">
											<input type="text" name="Phone" placeholder="Phone Number" required="">
											<input type="submit" value="Register">
										</form>
									</div>
								</div>
							</div>
						</div>
					</section>
				</div>
			</div>
		</div>
		<script>
			$('.toggle').click(function() {
				// Switches the Icon
				$(this).children('i').toggleClass('fa-pencil');
				// Switches the forms  
				$('.form').animate({
					height: "toggle",
					'padding-top': 'toggle',
					'padding-bottom': 'toggle',
					opacity: "toggle"
				}, "slow");
			});
		</script>
		<!-- //bootstrap-pop-up -->
		<!-- start-smoth-scrolling -->
		<script type="text/javascript" src="js/move-top.js"></script>
		<script type="text/javascript" src="js/easing.js"></script>
		<script type="text/javascript">
			jQuery(document).ready(function($) {
				$(".scroll").click(function(event) {
					event.preventDefault();
					$('html,body').animate({
						scrollTop: $(this.hash).offset().top
					}, 1000);
				});
			});
		</script>
		<!-- start-smoth-scrolling -->
		<!-- here stars scrolling icon -->
		<script type="text/javascript">
			$(document).ready(function() {
				/*
					var defaults = {
					containerID: 'toTop', // fading element id
					containerHoverID: 'toTopHover', // fading element hover id
					scrollSpeed: 1200,
					easingType: 'linear' 
					};
				*/

				$().UItoTop({
					easingType: 'easeOutQuart'
				});

			});
		</script>
		<!-- //here ends scrolling icon -->
		<!-- smoothscroll -->
		<script src="js/SmoothScroll.min.js"></script>
		<!-- //smoothscroll -->
		<script type="text/javascript">
	
		$(function() {
			//1.初始化Table
			var oTable = new TableInit();
			oTable.Init();
	
			//2.初始化Button的点击事件
			var oButtonInit = new ButtonInit();
			oButtonInit.Init();
		});
		var TableInit = function() {
			var oTableInit = new Object();
			//初始化Table
			oTableInit.Init = function() {
				$("#tb_cus").bootstrapTable({
					url : "/app/select/all", //请求后台的URL（*）
					method : "get", //请求方式（*）
					toolbar : "#toolbar", //工具按钮用哪个容器
					cache : false,   
					sortable : true,    //这三个属性表格初始化时候的排序
					sortName : "cid",
					sortOrder : "asc",
					queryParamsType : "limit", //采用restful风格发送数据
					queryParams : oTableInit.queryParams,//传递参数（*）
					pagination: true, //是否显示分页（*）
					sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）
					pageNumber : 1,
					pageSize : 5,                       //每页的记录行数（*）
					pageList : [5,10,25,50,100],    //设定修改每页多少条记录的选项
					silentsort : true,     //分页的时候记住排序
					showColumns : true,   //是否显示所有列的开关
					showRefresh : true,    //是否显示刷新按钮
					minimumCountColumns : 2,  //最少允许多少列数
					clickToSelect : true,    //是否启用点击选中功能
					showToggle : true,   //是否显示详细视图和列表视图的切换开关
					cardView : false,   //值为true的时候默认是详细视图
					detailView : false,   //是否显示父子表
					columns : [ {
						checkbox : true
					}, {
						field : "appid",
						title : "app编号",
						align: "center",
	                    valign: "middle",
	                    sortable: true // 开启排序功能
					}, {
						field : "appname",
						title : "app名称",
						align: "center",
	                    valign: "middle",
	                    sortable: true // 开启排序功能
					}, {
						field : "appdownloads",
						title : "下载量",
						align: "center",
	                    valign: "middle",
	                    sortable: true // 开启排序功能
					}, {
						field : "appdetail",
						title : "app信息",
						align: "center",
	                    valign: "middle",
	                    sortable: true // 开启排序功能
					}, {
						field : "applink",
						title : "app下载链接",
						align: "center",
	                    valign: "middle",
	                    sortable: true // 开启排序功能
					}], /* //改造JsonResult后就不需要配置这个属性了
					responseHandler: function(res) {  //表格数据设置 
						//console.log(res);
		                return {
		                    "total": res.pagedatas.total,//总记录数
		                    "rows": res.pagedatas.list   //数据
		                 };
	            	} */
	            	rowStyle : function(row,index){
	            		//console.log(row)
	            		if(row.status==2){
	            			return {classes : 'danger'}
	            		}else if(row.status==1){
	            			return {classes : 'success'}
	            		}else{
	            			return {css : {"background-color":"gray"}}
	            		}
	            	}
				});
			};
			
			//得到查询的参数
			oTableInit.queryParams = function(params) {
				//console.log(params);
				var temp = { //这里的键的名字和控制器的变量名必须一直，这边改动，控制器也需要改成一样的
					pageSize: params.limit,   //页面大小
					pageNum: params.offset,  //页码
					//search: params.search,  //搜索框
					sort: params.sort,    //排序字段
					order: params.order,  //排序方式
					cname : $("#cuscname").val(),
				};
				console.log(temp);
				return temp;
			};
	
			return oTableInit;
		};
	
		
		var ButtonInit = function() {
			var oInit = new Object();
	
			oInit.Init = function() {
				$("#btn_add").click(function(){
					//清空表单数据
					$("#myModal").find(".form-control").val("");
					//弹出模态窗口
					$("#myModal").modal();
				});
				
				$("#btn_edit").click(function(){
					var arrselections = commonCheck(true);
					if(arrselections==null)return;
					$("#editForm").setForm(arrselections[0]);
					$("#myModal").modal();
				});
			
			
				$("#btn_delete").click(function() {
					var arrselections = commonCheck(false);
					if(arrselections==null)return;
	
					Tip.confirm({
						message : "确认要删除选择的数据吗？"
					}).on(function(e) {
						if (!e) return;
						var cus = arrselections;
						$.delAll("/app/delete", cus, function(res) {
							commonChange(res);
						});
					});
				});
	
				$("#btn_query").click(function() {
					$("#tb_cus").bootstrapTable("refresh");
				});
				
				$("#btn_submit").click(function(){
					var param = $("#editForm").serializeJson();
					if($("#appid").val()!=""){
						$.edit("/app/update",param,function(res){
							commonChange(res);
						});
					}else{
						$.add("/app/add",param,function(res){
							commonChange(res);
						});
					}
				});
			};
	
			return oInit;
		};
		
		//统一取选中数据并做校验
		function commonCheck(only){
			var arrselections = $("#tb_cus").bootstrapTable("getSelections");
			//console.log(arrselections[0]);
			if(only&&arrselections.length > 1){
				toastr.warning("只能选择一行进行编辑");
				return null;
			}
			if (arrselections.length <= 0) {
				toastr.warning("请选择有效数据");
				return null;
			}
			return arrselections;
		}
		
		//针对增删改的返回内容做统一化处理
		function commonChange(res){
			if (res.state == 0) {
	        	toastr.success(res.message);
	        	$("#myModal").modal("hide");
	        	$("#tb_cus").bootstrapTable("refresh");
	    	}else{
	    		toastr.error(res.message);
	    	}
		}
		
	</script>
	</body>

</html>